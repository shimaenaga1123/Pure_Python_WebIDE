<!doctype html>
<html>
    <head>
        <script src="https://cdn.jsdelivr.net/pyodide/v0.29.0/full/pyodide.js"></script>
        <script type="module">
            import { EditorView, basicSetup } from "https://esm.sh/codemirror";
            import { python } from "https://esm.sh/@codemirror/lang-python";
            import { autocompletion } from "https://esm.sh/@codemirror/autocomplete";
            import { linter } from "https://esm.sh/@codemirror/lint";

            const pyodide = await loadPyodide();

            window.EditorView = EditorView;
            window.basicSetup = basicSetup;
            window.python_lang = python;
            window.autocompletion = autocompletion;
            window.linter = linter;

            await pyodide.loadPackage("micropip");

            pyodide.runPythonAsync(`{{! init }}`);
        </script>
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: monospace;
            }
            .cm-editor {
                height: 100vh;
            }
        </style>
    </head>
    <body></body>
</html>
